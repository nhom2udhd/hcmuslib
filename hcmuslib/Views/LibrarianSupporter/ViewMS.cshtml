@model PagedList.IPagedList<hcmuslib.Models.LUUHANHSACH>
@using PagedList.Mvc;
@{
    ViewBag.Title = "ViewMS";
    
}
<head>
    <title>Theo Doi Muon Sach - Thư viện ĐH KHTN TPHCM</title>
    <link href="/Content/bootstrap.min.css" rel="stylesheet">
    <link href="/Content/font-awesome.min.css" rel="stylesheet">
    <link href="/Content/prettyPhoto.css" rel="stylesheet">
    <link href="/Content/animate.css" rel="stylesheet">
    <link href="/Content/main.css" rel="stylesheet">
    <link href="/Content/mystyle.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
</head>
<section id="title4" class="emerald">
    
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <h1>Theo dõi mượn sách</h1>
               
            </div>
            <div class="col-sm-6">
                <ul class="breadcrumb pull-right">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#">Pages</a></li>
                    <li class="active"><a href="#">Theo dõi mượn sách</a></li>
                </ul>
            </div>
        </div>
    </div>
</section><!--/#title-->
<section id="theo_doi_muon_sach" class="container">
    <div class="row">
        <h4>Danh sách  </h4>                
        <form id="myForm1" action="/LibrarianSupporter/ViewMS" method="post">
            Tìm Kiếm Theo Mã Độc Giả, Mã Lưu Hành, Mã Sách : <input type="text" name="keySearch" class="form-control" style="width:200px;height:30px" onsubmit="OnchangeMSType();" value="@ViewBag.CurrentFilter"  />
            Trên : <select class="form-control" style="width:200px;height:30px" id="mySelect" name="MSType" onchange="OnchangeMSType();">
                <option value="0" selected=@ViewBag.MsType0>All</option>
                <option value="1" selected=@ViewBag.MsType1>Đã trả</option>
                <option value="2" selected=@ViewBag.MsType2>Đang mượn</option>
                <option value="3" selected=@ViewBag.MsType3>Gần đến hạn</option>
            </select>
        </form>
        <br />

        <script>
            function OnchangeMSType() {
                $('#myForm1').submit();
            }
        </script>
        <div>

        </div>
        <script>
            $(document).ready(function () {
                $('select').change(function () {
                    $("select option:selected").each(function () {
                        if($(this).val() == "Gần đến hạn")
                            $('#td_n').style.display = "normal"
                    })                  
                })
            });
        </script>
        @if(Model.Count() != 0)
        {
           <table class="table table-bordered" id="ListMS">
            <tr>
                <th>
                    @Html.DisplayName("ID Lưu Hành")
                </th>
                <th>
                    @Html.DisplayName("ID Độc giả")
                </th>
                <th>
                    @Html.DisplayName("ID Sách")
                </th>
                <th>
                    @Html.DisplayName("Ngày Mượn")
                </th>
                <th>
                    @Html.DisplayName("Thời Hạn Trả")
                </th>
                <th>
                    @Html.DisplayName("Tình Trạng")
                </th>
                <td id="td_nn" style="display:none">
                    @Html.DisplayName("Nhắc Nhở")
                </td>
            </tr>
            
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.ID_LUU_HANH)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DOC_GIA)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ID_SACH)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.NGAY_MUON)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.THOI_HAN_MUON)
                    </td>
                    <td>                           
                          @if (item.TINH_TRANG == "1")
                          {
                              @Html.DisplayName("Đã trả");                             
                          }
                          else
                          {
                              @Html.DisplayName("Đang mượn");
                          }
                    </td>
                    <td id="btn_nn" style="display:none">
                        <input type="button" onclick="" value="Mail" />
                    </td>
                </tr>
            }

        </table> 
        }
        else
        {
            <h2>Không Tìm Thấy Kết Quả Nào Phù Hợp</h2>
        }
        
        <br />
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

        @Html.PagedListPager(Model, page => Url.Action("ViewMs",
                      new { page, CurrentType = ViewBag.CurrentType, CurrentFilter = ViewBag.CurrentFilter }))
        </div>
    </section>>
